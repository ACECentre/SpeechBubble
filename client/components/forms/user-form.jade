form.form(name='form', ng-submit='save(form)', novalidate='')
  
  .form-group(ng-class='{ "has-success": form.email.$valid && submitted,\
  "has-error": form.email.$invalid && submitted }')
    label(for='email') Email *
    input.form-control(type='email', id='email', name='email', ng-model='user.email', required='', mongoose-error='')
    p.help-block(ng-show='form.email.$error.email && submitted')
      | Doesn't look like a valid email.
    p.help-block(ng-show='form.email.$error.required && submitted')
      | What's your email address?
    p.help-block(ng-show='form.email.$error.mongoose')
      | {{ errors.email }}
      
  .form-group(ng-if='requirePassword', ng-class='{ "has-success": form.password.$valid && submitted,\
  "has-error": form.password.$invalid && submitted }')
    label(for='password') Password *
    input.form-control(type='password', id='password', name='password', ng-model='user.password', ng-minlength='3', mongoose-error='', required='')
    p.help-block(ng-show='(form.password.$error.minlength || form.password.$error.required) && submitted')
      | Password must be at least 3 characters.
    p.help-block(ng-show='form.password.$error.mongoose')
      | {{ errors.password }}
      
  .form-group(ng-if='requirePassword', ng-class='{ "has-success": form.confirmPassword.$valid && submitted,\
  "has-error": form.confirmPassword.$invalid && submitted }')
    label(for='confirmPassword') Confirm Password *
    input.form-control(compare-to='user.password', type='password', id='confirmPassword', name='confirmPassword', ng-model='user.confirmPassword', required='')
    p.help-block(ng-show='(form.confirmPassword.$error.compareTo) && submitted')
      | Passwords do not match.
  
  .form-group(ng-class='{ "has-success": form.firstName.$valid && submitted,\
  "has-error": form.firstName.$invalid && submitted }')
    label(for='firstName') First Name *
    input.form-control(type='text', id='firstName', name='firstName', ng-model='user.firstName', required='')
    p.help-block(ng-show='form.firstName.$error.required && submitted')
      | A first name is required
      
  .form-group
    label(for='lastName') Last Name
    input.form-control(type='text', id='lastName', name='lastName', ng-model='user.lastName')
      
  .form-group
    label(for='description') Description
    select.form-control(id='description', name='description', ng-model='user.description')
      option(value='', disabled, selected) Please select
      option(value='professional') Professional
      option(value='parent') Parent
      option(value='aac user') AAC user
      option(value='other') Other
      
  .form-group
    label(for='region') Region
    select.form-control(id='region', name='region', ng-model='user.region')
      option(value='', disabled, selected) Please select
      option(value='UK') UK
      option(value='Europe') Europe
      option(value='USA') USA
      option(value='other') Other
      
      
  .form-group(ng-if='requirePassword', ng-class='{ "has-success": form.captcha.$valid && submitted,\
  "has-error": form.captcha.$invalid && submitted }')
    div.g-recaptcha(data-sitekey='6LdNWgITAAAAAK3XKid8mCCuG5h-qOaVw4kwMPdr')
    input.hide(id='captcha', name='captcha', ng-model='user.captcha', required='', mongoose-error='')
    p.help-block(ng-show='form.captcha.$error.required && submitted')
      | Please validate you are not a robot.
      
  .checkbox
    label
      input(type='checkbox', ng-model='user.subscribe')
      | I would like to join the Speech Bubble mailing list
      
  .checkbox(ng-if='requirePassword', ng-class='{ "has-success": form.accept.$valid && submitted,\
  "has-error": form.accept.$invalid && submitted }')
    label
      input(id='accept', name='accept', type='checkbox', ng-model='user.accept', required='')
      | I have read and accept the site 
      a(href='/privacy/', target='_blank') privacy policy
      |.
      
    p.help-block(ng-show='form.accept.$error.required && submitted')
      | You must accept the privacy policy to continue.
  

  button.btn.btn-primary(type='submit') Submit
  
  br
  br
  small * Required fields
  
  script(src='https://www.google.com/recaptcha/api.js')
